# 迭代器和生成器

可迭代对象和迭代器时ES的一个特性。数组、字符串、Set对象等都是可迭代的。

可迭代对象意味着可以通过`for/of`循环来迭代：

~~~js
let sum = 0;
for(let i of [1,2,3])
    sum +=i;
console.log(sum) //6
~~~

迭代器让`...`操作符能够展开或者扩展可迭代对象：

~~~js
let chars =[..."abcd"] // ["a","b","c","d"]
let date = [1,2,3,4,5];
Math.max(...date); //5
~~~

迭代器也可以用于解构赋值：

~~~JS
let [x,y] = [1,2];  //相等于 let x = 1, y =2;
[x,y] = [x+1,y+1];
~~~

接下来我们会介绍迭代器的原理，如何创建可迭代对象，最后将如何用生成器简化迭代器的创建。

## 迭代器原理

要理解迭代是如何发生的，需要理解下面三种对象：

* 可迭代对象指任何具有专用迭代器方法，且该方法返回迭代器对象的对象。

* 迭代器对象指具有next()方法，且该方法返回迭代结果对象的对象。

* 迭代结果对象指具有属性value和done的对象。

要迭代一个可迭代对象，首先要调用其迭代器方法，获取一个迭代器对象，然后，重复调用这个迭代器对象的`next()`方法，直到返回done属性为true的迭代结果对象。

这里比较特殊的是，可迭代对象的迭代器方法没有使用惯用名称，而是使用了符号`Symbol.iterator`最为名字：

因此，最开始给出的`for/of`循环实际上进行了如下的等价操作：

~~~js
let sum = 0;
let array = [1,2,3];
let iter = array[Symbol.iterator];
for(let result =iter.next();!result.done;result=iter.next())
    sum += result.value;
console.log(sum) //6
~~~

## 实现可迭代对象

除了JS提供的可迭代对象。我们也可以将自己实现的对象实现为可迭代对象。

为了让类可迭代，必须要实现一个名为`Symbol.iterator`的迭代器方法，该方法返回一个迭代器对象。而迭代器对象有一个`next()`方法。而这个`next()`方法必须返回一个迭代结果对象。而迭代结果对象有`value`和`done`属性。



# 异步JS







# 元编程